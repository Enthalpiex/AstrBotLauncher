# ğŸ“ æ‰¹é‡ä¸Šä¼ æ–‡ä»¶åˆ°çŸ¥è¯†åº“ä½¿ç”¨æŒ‡å—

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. åŸºæœ¬ç”¨æ³•
```bash
# ä¸Šä¼ æŒ‡å®šæ–‡ä»¶å¤¹ä¸­çš„æ‰€æœ‰æ–‡ä»¶
python batch_upload_files.py "D:\Github Doc\AstrBotLauncher\Database_Source"

# è‡ªå®šä¹‰çŸ¥è¯†åº“åç§°
python batch_upload_files.py "D:\Github Doc\AstrBotLauncher\Database_Source" --kb-name "èˆªå¤©"
```

### 2. é«˜çº§ç”¨æ³•
```bash
# è‡ªå®šä¹‰AstrBotåœ°å€
python batch_upload_files.py "D:\Github Doc\AstrBotLauncher\Database_Source" --astrbot-url "http://192.168.1.100:6185"

# è‡ªå®šä¹‰ç™»å½•ä¿¡æ¯
python batch_upload_files.py "D:\Github Doc\AstrBotLauncher\Database_Source" --username "admin" --password "your_password"

# è®¾ç½®åˆ†ç‰‡å‚æ•°
python batch_upload_files.py "D:\Github Doc\AstrBotLauncher\Database_Source" --chunk-size 1000 --chunk-overlap 200

# è°ƒæ•´ä¸Šä¼ é—´éš”
python batch_upload_files.py "D:\Github Doc\AstrBotLauncher\Database_Source" --delay 2.0
```

## ğŸ“‹ åŠŸèƒ½ç‰¹ç‚¹

### âœ… æ™ºèƒ½å»é‡
- è‡ªåŠ¨è®°å½•å·²ä¸Šä¼ æ–‡ä»¶
- é€šè¿‡æ–‡ä»¶å“ˆå¸Œå€¼åˆ¤æ–­æ˜¯å¦é‡å¤
- é¿å…é‡å¤ä¸Šä¼ ç›¸åŒæ–‡ä»¶

### âœ… æ”¯æŒæ ¼å¼
- **æ–‡æ¡£**: PDF, DOC, DOCX, TXT, MD, RTF
- **è¡¨æ ¼**: XLS, XLSX, CSV
- **æ¼”ç¤º**: PPT, PPTX

### âœ… è‡ªåŠ¨ç®¡ç†
- è‡ªåŠ¨ç™»å½•AstrBot
- è‡ªåŠ¨åˆ›å»ºçŸ¥è¯†åº“
- è‡ªåŠ¨é€‰æ‹©Embeddingæä¾›å•†

### âœ… è¿›åº¦æ˜¾ç¤º
- å®æ—¶æ˜¾ç¤ºä¸Šä¼ è¿›åº¦
- è¯¦ç»†çš„ç»Ÿè®¡ä¿¡æ¯
- å®Œæ•´çš„æ—¥å¿—è®°å½•

## ğŸ“Š ä¸Šä¼ è®°å½•

### è®°å½•æ–‡ä»¶æ ¼å¼
è„šæœ¬ä¼šåˆ›å»º `upload_record.json` æ–‡ä»¶è®°å½•ä¸Šä¼ å†å²ï¼š

```json
{
  "æ–‡ä»¶å.pdf": {
    "hash": "æ–‡ä»¶å“ˆå¸Œå€¼",
    "size": æ–‡ä»¶å¤§å°,
    "collection_name": "çŸ¥è¯†åº“åç§°",
    "upload_time": "ä¸Šä¼ æ—¶é—´",
    "file_path": "æ–‡ä»¶è·¯å¾„"
  }
}
```

### ç®¡ç†ä¸Šä¼ è®°å½•
```bash
# ä½¿ç”¨è‡ªå®šä¹‰è®°å½•æ–‡ä»¶
python batch_upload_files.py "D:\Github Doc\AstrBotLauncher\Database_Source" --record-file "my_upload_record.json"

# æ¸…é™¤è®°å½•é‡æ–°ä¸Šä¼ 
rm upload_record.json
python batch_upload_files.py "D:\Github Doc\AstrBotLauncher\Database_Source"
```

## ğŸ› ï¸ å‚æ•°è¯´æ˜

| å‚æ•° | è¯´æ˜ | é»˜è®¤å€¼ |
|------|------|--------|
| `folder_path` | è¦ä¸Šä¼ çš„æ–‡ä»¶å¤¹è·¯å¾„ | å¿…éœ€ |
| `--kb-name` | çŸ¥è¯†åº“åç§° | "æ‰¹é‡ä¸Šä¼ çŸ¥è¯†åº“" |
| `--astrbot-url` | AstrBotåœ°å€ | "http://localhost:6185" |
| `--username` | ç”¨æˆ·å | "Germania" |
| `--password` | å¯†ç  | é»˜è®¤å¯†ç  |
| `--chunk-size` | åˆ†ç‰‡å¤§å° | è‡ªåŠ¨ |
| `--chunk-overlap` | åˆ†ç‰‡é‡å  | è‡ªåŠ¨ |
| `--delay` | ä¸Šä¼ é—´éš”(ç§’) | 1.0 |
| `--record-file` | ä¸Šä¼ è®°å½•æ–‡ä»¶ | "upload_record.json" |

## ğŸ“ˆ ä½¿ç”¨åœºæ™¯

### 1. é¦–æ¬¡æ‰¹é‡ä¸Šä¼ 
```bash
# ä¸Šä¼ æ‰€æœ‰æ–‡ä»¶åˆ°æ–°çŸ¥è¯†åº“
python batch_upload_files.py "D:\Github Doc\AstrBotLauncher\Database_Source" --kb-name "å®Œæ•´æ•°æ®åº“"
```

### 2. å¢é‡ä¸Šä¼ 
```bash
# æ·»åŠ æ–°æ–‡ä»¶åˆ°ç°æœ‰çŸ¥è¯†åº“
python batch_upload_files.py "D:\Github Doc\AstrBotLauncher\Database_Source\æ–°æ–‡ä»¶" --kb-name "å®Œæ•´æ•°æ®åº“"
```

### 3. åˆ†ç±»ä¸Šä¼ 
```bash
# æŒ‰ç±»å‹åˆ†åˆ«ä¸Šä¼ 
python batch_upload_files.py "D:\Github Doc\AstrBotLauncher\Database_Source\PDFæ–‡æ¡£" --kb-name "PDFæ–‡æ¡£åº“"
python batch_upload_files.py "D:\Github Doc\AstrBotLauncher\Database_Source\Wordæ–‡æ¡£" --kb-name "Wordæ–‡æ¡£åº“"
python batch_upload_files.py "D:\Github Doc\AstrBotLauncher\Database_Source\Excelè¡¨æ ¼" --kb-name "Excelè¡¨æ ¼åº“"
```

## ğŸ”§ æ€§èƒ½ä¼˜åŒ–

### 1. ç½‘ç»œä¼˜åŒ–
```bash
# å‡å°‘ä¸Šä¼ é—´éš”æé«˜é€Ÿåº¦
python batch_upload_files.py "D:\Github Doc\AstrBotLauncher\Database_Source" --delay 0.5

# å¢åŠ ä¸Šä¼ é—´éš”é¿å…æœåŠ¡å™¨å‹åŠ›
python batch_upload_files.py "D:\Github Doc\AstrBotLauncher\Database_Source" --delay 2.0
```

### 2. åˆ†ç‰‡ä¼˜åŒ–
```bash
# å¤§æ–‡ä»¶ä½¿ç”¨å°åˆ†ç‰‡
python batch_upload_files.py "D:\Github Doc\AstrBotLauncher\Database_Source" --chunk-size 500

# å°æ–‡ä»¶ä½¿ç”¨å¤§åˆ†ç‰‡
python batch_upload_files.py "D:\Github Doc\AstrBotLauncher\Database_Source" --chunk-size 2000
```

## ğŸš¨ æ³¨æ„äº‹é¡¹

### 1. å‰ç½®è¦æ±‚
- AstrBotå¿…é¡»æ­£åœ¨è¿è¡Œ
- çŸ¥è¯†åº“æ’ä»¶å¿…é¡»å·²å®‰è£…å¹¶å¯ç”¨
- å¿…é¡»é…ç½®è‡³å°‘ä¸€ä¸ªEmbeddingæä¾›å•†

### 2. æ–‡ä»¶è¦æ±‚
- æ–‡ä»¶å¿…é¡»å¯æ­£å¸¸æ‰“å¼€
- é¿å…æŸåçš„æ–‡ä»¶
- å»ºè®®æ–‡ä»¶å¤§å°ä¸è¶…è¿‡100MB

### 3. ç½‘ç»œè¦æ±‚
- ç¨³å®šçš„ç½‘ç»œè¿æ¥
- è¶³å¤Ÿçš„å¸¦å®½
- é¿å…ç½‘ç»œä¸­æ–­

## ğŸ” æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

#### 1. ç™»å½•å¤±è´¥
```bash
# æ£€æŸ¥AstrBotæ˜¯å¦è¿è¡Œ
curl http://localhost:6185/api/auth/login

# æ£€æŸ¥ç”¨æˆ·åå¯†ç 
python batch_upload_files.py "D:\Github Doc\AstrBotLauncher\Database_Source" --username "Germania" --password "your_password"
```

#### 2. ä¸Šä¼ å¤±è´¥
```bash
# æ£€æŸ¥æ–‡ä»¶æ˜¯å¦æŸå
python -c "import fitz; fitz.open('æ–‡ä»¶è·¯å¾„.pdf')"

# å‡å°åˆ†ç‰‡å¤§å°
python batch_upload_files.py "D:\Github Doc\AstrBotLauncher\Database_Source" --chunk-size 500
```

#### 3. ç½‘ç»œè¶…æ—¶
```bash
# å¢åŠ ä¸Šä¼ é—´éš”
python batch_upload_files.py "D:\Github Doc\AstrBotLauncher\Database_Source" --delay 3.0

# æ£€æŸ¥ç½‘ç»œè¿æ¥
ping localhost
```

## ğŸ“Š ç›‘æ§è¿›åº¦

### 1. æŸ¥çœ‹æ—¥å¿—
```bash
# å®æ—¶æŸ¥çœ‹æ—¥å¿—
tail -f batch_upload.log

# æŸ¥çœ‹é”™è¯¯æ—¥å¿—
grep "ERROR" batch_upload.log
```

### 2. æ£€æŸ¥è¿›åº¦
```bash
# æŸ¥çœ‹ä¸Šä¼ è®°å½•
cat upload_record.json | jq 'keys | length'

# æŸ¥çœ‹çŸ¥è¯†åº“çŠ¶æ€
curl -H "Authorization: Bearer $TOKEN" http://localhost:6185/api/plug/alkaid/kb/collections
```

## ğŸ¯ æœ€ä½³å®è·µ

### 1. åˆ†æ‰¹å¤„ç†
```bash
# æŒ‰æ–‡ä»¶å¤§å°åˆ†æ‰¹
find "D:\Github Doc\AstrBotLauncher\Database_Source" -name "*.pdf" -size +50M -exec mv {} large_files/ \;
find "D:\Github Doc\AstrBotLauncher\Database_Source" -name "*.pdf" -size -50M -exec mv {} small_files/ \;

# åˆ†åˆ«å¤„ç†
python batch_upload_files.py "small_files" --kb-name "å°æ–‡ä»¶åº“"
python batch_upload_files.py "large_files" --kb-name "å¤§æ–‡ä»¶åº“"
```

### 2. å®šæœŸå¤‡ä»½
```bash
# å¤‡ä»½ä¸Šä¼ è®°å½•
cp upload_record.json upload_record_backup.json

# å¤‡ä»½æ—¥å¿—
cp batch_upload.log batch_upload_backup.log
```

### 3. ç›‘æ§èµ„æº
- ç›‘æ§ç£ç›˜ç©ºé—´
- ç›‘æ§ç½‘ç»œå¸¦å®½
- ç›‘æ§AstrBotå†…å­˜ä½¿ç”¨

## ğŸ‰ å®Œæˆåçš„ä½¿ç”¨

### 1. åœ¨èŠå¤©ä¸­ä½¿ç”¨
```bash
/kb use æ‰¹é‡ä¸Šä¼ çŸ¥è¯†åº“    # æ¿€æ´»çŸ¥è¯†åº“
/kb æŸ¥è¯¢å†…å®¹              # æŸ¥è¯¢çŸ¥è¯†åº“
```

### 2. ç®¡ç†çŸ¥è¯†åº“
- è®¿é—®ï¼šhttp://localhost:6185
- è¿›å…¥ï¼šAlkaid â†’ çŸ¥è¯†åº“
- ç®¡ç†ï¼šæŸ¥çœ‹ã€ç¼–è¾‘ã€åˆ é™¤çŸ¥è¯†åº“

### 3. ä¼˜åŒ–æŸ¥è¯¢
- è°ƒæ•´æ£€ç´¢å‚æ•°
- ä¼˜åŒ–æç¤ºè¯
- ç›‘æ§æŸ¥è¯¢æ•ˆæœ 