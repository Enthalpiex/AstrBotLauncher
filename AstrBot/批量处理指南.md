# ğŸ“š 7G PDFæ‰¹é‡å¤„ç†æŒ‡å—

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–
```bash
python install_dependencies.py
```

### 2. æ‰¹é‡å¤„ç†PDF
```bash
# åŸºæœ¬ç”¨æ³•
python batch_knowledge_processor.py /path/to/your/pdf/directory

# è‡ªå®šä¹‰çŸ¥è¯†åº“åç§°
python batch_knowledge_processor.py /path/to/your/pdf/directory --kb-name "èˆªå¤©çŸ¥è¯†åº“"

# ä»…æå–æ–‡æœ¬ï¼ˆæ›´å¿«ï¼‰
python batch_knowledge_processor.py /path/to/your/pdf/directory --text-only
```

## ğŸ“‹ åŠŸèƒ½ç‰¹ç‚¹

### âœ… è‡ªåŠ¨åˆ†å‰²å¤§æ–‡ä»¶
- è‡ªåŠ¨æ£€æµ‹è¶…è¿‡50MBçš„PDFæ–‡ä»¶
- æŒ‰é¡µæ•°åˆ†å‰²ï¼ˆé»˜è®¤50é¡µ/æ–‡ä»¶ï¼‰
- é¿å…ä¸Šä¼ è¶…æ—¶é—®é¢˜

### âœ… å¹¶å‘å¤„ç†
- æ”¯æŒå¤šæ–‡ä»¶å¹¶å‘ä¸Šä¼ 
- å¯è°ƒèŠ‚å¹¶å‘æ•°é‡ï¼ˆé»˜è®¤3ä¸ªï¼‰
- æé«˜å¤„ç†é€Ÿåº¦

### âœ… æ™ºèƒ½å¤„ç†
- è‡ªåŠ¨ç™»å½•AstrBotç®¡ç†é¢æ¿
- è‡ªåŠ¨åˆ›å»ºçŸ¥è¯†åº“
- è‡ªåŠ¨é€‰æ‹©Embeddingæä¾›å•†

### âœ… é”™è¯¯å¤„ç†
- æ–‡ä»¶å¤„ç†å¤±è´¥è‡ªåŠ¨è·³è¿‡
- è¯¦ç»†çš„é”™è¯¯æ—¥å¿—
- æ”¯æŒæ–­ç‚¹ç»­ä¼ 

## ğŸ› ï¸ é«˜çº§ç”¨æ³•

### 1. è‡ªå®šä¹‰åˆ†å‰²è®¾ç½®
```bash
# æ¯ä¸ªæ–‡ä»¶100é¡µ
python batch_knowledge_processor.py /path/to/pdfs --max-pages 100

# å¹¶å‘5ä¸ªæ–‡ä»¶
python batch_knowledge_processor.py /path/to/pdfs --max-concurrent 5
```

### 2. è‡ªå®šä¹‰AstrBotåœ°å€
```bash
# å¦‚æœAstrBotè¿è¡Œåœ¨å…¶ä»–åœ°å€
python batch_knowledge_processor.py /path/to/pdfs --astrbot-url "http://192.168.1.100:6185"
```

### 3. è‡ªå®šä¹‰ç™»å½•ä¿¡æ¯
```bash
# ä½¿ç”¨ä¸åŒçš„ç”¨æˆ·åå’Œå¯†ç 
python batch_knowledge_processor.py /path/to/pdfs --username "admin" --password "your_password"
```

## ğŸ“Š å¤„ç†ç­–ç•¥

### æ–¹æ¡ˆä¸€ï¼šç›´æ¥ä¸Šä¼ ï¼ˆæ¨èï¼‰
```bash
python batch_knowledge_processor.py /path/to/pdfs --kb-name "å®Œæ•´çŸ¥è¯†åº“"
```
**ä¼˜ç‚¹**ï¼šä¿æŒPDFæ ¼å¼ï¼Œæ”¯æŒå›¾ç‰‡å’Œè¡¨æ ¼
**ç¼ºç‚¹**ï¼šå¤„ç†æ—¶é—´è¾ƒé•¿

### æ–¹æ¡ˆäºŒï¼šæ–‡æœ¬æå–ï¼ˆå¿«é€Ÿï¼‰
```bash
python batch_knowledge_processor.py /path/to/pdfs --text-only --kb-name "æ–‡æœ¬çŸ¥è¯†åº“"
```
**ä¼˜ç‚¹**ï¼šå¤„ç†é€Ÿåº¦å¿«ï¼Œæ–‡ä»¶å°
**ç¼ºç‚¹**ï¼šä¸¢å¤±å›¾ç‰‡å’Œæ ¼å¼ä¿¡æ¯

### æ–¹æ¡ˆä¸‰ï¼šæ··åˆå¤„ç†
```bash
# å…ˆæå–æ–‡æœ¬
python batch_knowledge_processor.py /path/to/pdfs --text-only --kb-name "å¿«é€ŸçŸ¥è¯†åº“"

# å†ä¸Šä¼ é‡è¦PDF
python batch_knowledge_processor.py /path/to/important_pdfs --kb-name "å®Œæ•´çŸ¥è¯†åº“"
```

## ğŸ”§ æ€§èƒ½ä¼˜åŒ–

### 1. ç¡¬ä»¶è¦æ±‚
- **å†…å­˜**ï¼šå»ºè®®8GBä»¥ä¸Š
- **å­˜å‚¨**ï¼šç¡®ä¿æœ‰è¶³å¤Ÿç©ºé—´å­˜å‚¨åˆ†å‰²æ–‡ä»¶
- **ç½‘ç»œ**ï¼šç¨³å®šçš„ç½‘ç»œè¿æ¥

### 2. å‚æ•°è°ƒä¼˜
```bash
# é«˜é…ç½®æœºå™¨
python batch_knowledge_processor.py /path/to/pdfs --max-concurrent 10 --max-pages 100

# ä½é…ç½®æœºå™¨
python batch_knowledge_processor.py /path/to/pdfs --max-concurrent 1 --max-pages 20
```

### 3. åˆ†æ‰¹å¤„ç†
```bash
# å°†PDFæŒ‰ç±»åˆ«åˆ†ç›®å½•
/pdfs/
  â”œâ”€â”€ æŠ€æœ¯æ–‡æ¡£/
  â”œâ”€â”€ ç”¨æˆ·æ‰‹å†Œ/
  â””â”€â”€ ç ”ç©¶æŠ¥å‘Š/

# åˆ†åˆ«å¤„ç†
python batch_knowledge_processor.py /pdfs/æŠ€æœ¯æ–‡æ¡£ --kb-name "æŠ€æœ¯æ–‡æ¡£åº“"
python batch_knowledge_processor.py /pdfs/ç”¨æˆ·æ‰‹å†Œ --kb-name "ç”¨æˆ·æ‰‹å†Œåº“"
```

## ğŸš¨ æ³¨æ„äº‹é¡¹

### 1. æ–‡ä»¶å‡†å¤‡
- ç¡®ä¿PDFæ–‡ä»¶å¯æ­£å¸¸æ‰“å¼€
- æ£€æŸ¥æ–‡ä»¶ç¼–ç ï¼ˆå»ºè®®UTF-8ï¼‰
- é¿å…æŸåçš„PDFæ–‡ä»¶

### 2. ç½‘ç»œç¨³å®š
- å¤„ç†è¿‡ç¨‹ä¸­ä¿æŒç½‘ç»œè¿æ¥
- å»ºè®®ä½¿ç”¨æœ‰çº¿ç½‘ç»œ
- é¿å…ç½‘ç»œä¸­æ–­

### 3. å­˜å‚¨ç©ºé—´
- ç¡®ä¿æœ‰è¶³å¤Ÿç©ºé—´å­˜å‚¨ä¸´æ—¶æ–‡ä»¶
- å¤„ç†å®Œæˆåä¼šè‡ªåŠ¨æ¸…ç†ä¸´æ—¶æ–‡ä»¶
- å»ºè®®é¢„ç•™2å€PDFå¤§å°çš„ç©ºé—´

## ğŸ“ˆ é¢„ä¼°æ—¶é—´

### 7G PDFå¤„ç†æ—¶é—´é¢„ä¼°
- **æ–‡æœ¬æå–**ï¼š30-60åˆ†é’Ÿ
- **ç›´æ¥ä¸Šä¼ **ï¼š2-4å°æ—¶
- **ç½‘ç»œä¸Šä¼ **ï¼šå–å†³äºç½‘ç»œé€Ÿåº¦

### ä¼˜åŒ–å»ºè®®
1. å…ˆè¿è¡Œ`--text-only`æµ‹è¯•
2. æ ¹æ®ç»“æœè°ƒæ•´å‚æ•°
3. åˆ†æ‰¹å¤„ç†å¤§æ–‡ä»¶

## ğŸ” æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

#### 1. ç™»å½•å¤±è´¥
```bash
# æ£€æŸ¥AstrBotæ˜¯å¦è¿è¡Œ
curl http://localhost:6185/api/auth/login

# æ£€æŸ¥ç”¨æˆ·åå¯†ç 
python batch_knowledge_processor.py /path/to/pdfs --username "Germania" --password "your_password"
```

#### 2. æ–‡ä»¶ä¸Šä¼ å¤±è´¥
```bash
# æ£€æŸ¥æ–‡ä»¶å¤§å°
ls -lh /path/to/pdfs/*.pdf

# å‡å°åˆ†å‰²é¡µæ•°
python batch_knowledge_processor.py /path/to/pdfs --max-pages 20
```

#### 3. å†…å­˜ä¸è¶³
```bash
# å‡å°‘å¹¶å‘æ•°
python batch_knowledge_processor.py /path/to/pdfs --max-concurrent 1

# ä½¿ç”¨æ–‡æœ¬æå–æ¨¡å¼
python batch_knowledge_processor.py /path/to/pdfs --text-only
```

## ğŸ¯ æœ€ä½³å®è·µ

### 1. é¢„å¤„ç†
```bash
# æ£€æŸ¥PDFæ–‡ä»¶
find /path/to/pdfs -name "*.pdf" -exec pdfinfo {} \;

# æ¸…ç†æŸåæ–‡ä»¶
find /path/to/pdfs -name "*.pdf" -exec sh -c 'if ! pdfinfo "$1" >/dev/null 2>&1; then echo "æŸå: $1"; fi' _ {} \;
```

### 2. åˆ†æ‰¹å¤„ç†
```bash
# æŒ‰æ–‡ä»¶å¤§å°åˆ†æ‰¹
find /path/to/pdfs -name "*.pdf" -size +100M -exec mv {} /path/to/large_pdfs/ \;
find /path/to/pdfs -name "*.pdf" -size -100M -exec mv {} /path/to/small_pdfs/ \;

# åˆ†åˆ«å¤„ç†
python batch_knowledge_processor.py /path/to/small_pdfs --kb-name "å°æ–‡ä»¶åº“"
python batch_knowledge_processor.py /path/to/large_pdfs --kb-name "å¤§æ–‡ä»¶åº“"
```

### 3. ç›‘æ§è¿›åº¦
```bash
# æŸ¥çœ‹å¤„ç†æ—¥å¿—
tail -f batch_processing.log

# æ£€æŸ¥çŸ¥è¯†åº“çŠ¶æ€
curl -H "Authorization: Bearer $TOKEN" http://localhost:6185/api/plug/alkaid/kb/collections
```

## ğŸ‰ å®Œæˆåçš„ä½¿ç”¨

### 1. åœ¨èŠå¤©ä¸­ä½¿ç”¨
```bash
/kb æŸ¥è¯¢å†…å®¹    # æŸ¥è¯¢çŸ¥è¯†åº“
/kb list        # æŸ¥çœ‹çŸ¥è¯†åº“åˆ—è¡¨
```

### 2. ç®¡ç†çŸ¥è¯†åº“
- è®¿é—®ï¼šhttp://localhost:6185
- è¿›å…¥ï¼šAlkaid â†’ çŸ¥è¯†åº“
- ç®¡ç†ï¼šæŸ¥çœ‹ã€ç¼–è¾‘ã€åˆ é™¤çŸ¥è¯†åº“

### 3. ä¼˜åŒ–æŸ¥è¯¢
- è°ƒæ•´æ£€ç´¢å‚æ•°
- ä¼˜åŒ–æç¤ºè¯
- ç›‘æ§æŸ¥è¯¢æ•ˆæœ 